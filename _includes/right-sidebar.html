<div class="right-sidebar" id="right-sidebar">
  <h3><strong>ON THIS PAGE</strong></h3>
  <ul id="page-toc" style="list-style-type: disc; padding-left: 20px; font-size: 14px; line-height: 1.6;">
    <!-- Headings will be inserted here -->
  </ul>
</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const content = document.querySelector('main') || document.body;
  const toc = document.getElementById('page-toc');
  if (!content || !toc) return;

  // Helper: Convert to Title Case
  function toTitleCase(str) {
    return str
      .toLowerCase()
      .replace(/\b\w/g, char => char.toUpperCase());
  }

  const headings = content.querySelectorAll('h2, h3');
  headings.forEach(h => {
    // Ensure each heading has an ID for linking
    if (!h.id) {
      h.id = h.textContent.trim().toLowerCase().replace(/\s+/g, '-');
    }
    // Create list item
    const li = document.createElement('li');
    if (h.tagName === 'H3') li.style.marginLeft = '20px';
    // Create link with Title Case text
    const a = document.createElement('a');
    a.href = '#' + h.id;
    a.textContent = toTitleCase(h.textContent.trim());
    li.appendChild(a);
    toc.appendChild(li);
  });
});
</script>
